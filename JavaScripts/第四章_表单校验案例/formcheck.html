<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>表单注册检测</title>
    <script type="text/javascript">
        // 表单校验
        /*
            事件
                onsubmit()      提交时
                onblur()        失去焦点时
        */

        // 提交时校验
        function checkForm()
        {
            // 数据校验        
            var isPass = true;
            var userMassageName = document.getElementById("uM-name");
            var userMassageEmail = document.getElementById("uM-email");
            var userMassagePassword = document.getElementById("uM-password");
            var massageRepPassword = document.getElementById("uM-repPassword");

            // 用户名检测
            var userName = document.getElementById("user-name");
            var length = userName.value.length;
            if (length < 3 || length > 10)
            {

                isPass = false;
                // 用户提示
                // alert("用户名必须是3-10位!");
                userMassageName.innerText = "用户名长度必须是3-10位"
                return isPass;
            }
            else
            {
                userMassageName.innerText = "";
            }

            // 邮箱检测
            var userEmail = document.getElementById("email").value;
            // 邮箱正则表达式，提供网站: https://c.runoob.com/front-end/854/
            var emailReg = /^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;
            if (!emailReg.test(userEmail))
            {
                isPass = false;
                // 用户提示
                // alert("邮箱格式不正确!");
                userMassageEmail.innerText = "邮箱格式不正确!";
                return isPass;
            }
            else
            {
                userMassageEmail.innerText = "";
            }

            // 密码校验
            var userPassword = document.getElementById("password").value;
            var repeatPassword = document.getElementById("repeat-password").value;
            if (userPassword.length < 6 || userPassword.length > 10)
            {
                isPass = false;
                // 用户提示
                // alert("密码长度为6-10");
                userMassagePassword.innerText = "密码长度为6-10";
                return isPass;
            }
            else if (repeatPassword != userPassword)
            {
                isPass = false;
                // 用户提示
                // alert("两次密码不一致！");
                userMassagePassword.innerText = "";
                massageRepPassword.innerText = "两次密码不一致！";
                return isPass;
            }
            else
            {
                massageRepPassword.innerText = "";
            }

            return isPass;
        }

        // 检查用户名
        function checkUserName(userName)
        {
            // 使用 this 表示使用调用的元素  
            // userName 等于 input 对象， 相当于input.value.length
            var userMassageName = document.getElementById("uM-name");
            // 用户名检测
            // var userName = document.getElementById("user-name");
            var length = userName.value.length;
            if (length < 3 || length > 10)
            {

                isPass = false;
                // 用户提示
                // alert("用户名必须是3-10位!");
                userMassageName.innerText = "用户名长度必须是3-10位"
                return isPass;
            }
            else
            {
                userMassageName.innerText = "";
            }
        }
        //检查邮箱
        function checkEmail(userEmail)
        {
            // var userEmail = document.getElementById("email").value;
            // 邮箱正则表达式，提供网站: https://c.runoob.com/front-end/854/
            var userMassageEmail = document.getElementById("uM-email");
            var emailReg = /^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;
            if (!emailReg.test(userEmail.value))
            {
                isPass = false;
                // 用户提示
                // alert("邮箱格式不正确!");
                userMassageEmail.innerText = "邮箱格式不正确!";
                return isPass;
            }
            else
            {
                userMassageEmail.innerText = "";
            }
        }
        // 检查密码
        function checkPassword()
        {
            var userMassagePassword = document.getElementById("uM-password");
            var massageRepPassword = document.getElementById("uM-repPassword");

            var userPassword = document.getElementById("password").value;
            var repeatPassword = document.getElementById("repeat-password").value;
            if (userPassword.length < 6 || userPassword.length > 10)
            {
                isPass = false;
                // 用户提示
                // alert("密码长度为6-10");
                userMassagePassword.innerText = "密码长度为6-10";
                return isPass;
            }
            else if (repeatPassword != userPassword)
            {
                isPass = false;
                // 用户提示
                // alert("两次密码不一致！");
                userMassagePassword.innerText = "";
                massageRepPassword.innerText = "两次密码不一致！";
                return isPass;
            }
            else
            {
                massageRepPassword.innerText = "";
            }
        }

    </script>
    <!-- CSS -->
    <style>
        table {
            width: 600px;
            height: 300px;
            border: 2px solid;
            border-collapse: collapse;
        }

        tr,
        td {
            border: 1px solid;
            text-align: center;
        }
    </style>
</head>

<body>
    <!-- onsubmit() 表单提交时 return 取返回值 true 才会提交-->
    <form method="get" action="http://127.0.0.1:3000/" onsubmit="return checkForm()">
        <table>
            <tr>
                <td colspan="2">注册</td>
            </tr>
            <tr>
                <td>用户名：</td>
                <td>
                    <input name="userName" type="text" id="user-name" onblur="checkUserName(this)">
                    <span color="red" id="uM-name"></span>
                </td>
            </tr>
            <tr>
                <td>邮箱：</td>
                <td a>
                    <input name="userEmail" type="text" id="email" onblur="checkEmail(this)">
                    <span color="red" id="uM-email"></span>
                </td>
            </tr>
            <tr>
                <td>密码：</td>
                <td>
                    <input name="userPassword" type="text" id="password" onblur="checkPassword()">
                    <span color="red" id="uM-password"></span>
                </td>
            </tr>
            <tr>
                <td>重复密码：</td>
                <td>
                    <input type="text" id="repeat-password" onblur="checkPassword()">
                    <span color="red" id="uM-repPassword"></span>
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <input type="submit" value="注册">
                    <input type="reset" value="清空">
                </td>
            </tr>
        </table>
    </form>
</body>

</html>